<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>


<VBox spacing="25"
      xmlns="http://javafx.com/javafx/17.0.12"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="tezfx.controller.HelloController">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Welcome -->
    <HBox spacing="20" alignment="CENTER_LEFT">
        <VBox spacing="5">
            <Label text="Welcome back, Alex " styleClass="title"/>
            <Label text="Here's what's happening with your projects today."
                   styleClass="subtitle"/>
        </VBox>

        <Region HBox.hgrow="ALWAYS" />

        <HBox spacing="10" alignment="CENTER_RIGHT">
            <Button text="Download Report" styleClass="btn-secondary">
                <graphic>
                    <FontIcon iconLiteral="mdi2f-file-download-outline" iconSize="16" />
                </graphic>
            </Button>

            <Button text="New Project" styleClass="btn-primary" onAction="#openAddProjectPopup">
                <graphic>
                    <FontIcon iconLiteral="mdi2p-plus" iconSize="16" styleClass="white-icon"/>
                </graphic>
            </Button>
        </HBox>
    </HBox>
    <!-- ================= KPI CARDS ================= -->
    <HBox spacing="16">

        <VBox styleClass="kpi-card">
            <HBox>
                <StackPane styleClass="kpi-icon purple">
                    <FontIcon iconLiteral="mdi2c-clock-outline" iconSize="16" styleClass="orange-icon"/>
                </StackPane>
            </HBox>
            <Label fx:id="tasksInProgressKpiLabel" text="0" styleClass="kpi-value"/>
            <Label text="Tasks In Progress" styleClass="kpi-label"/>
        </VBox>

        <VBox styleClass="kpi-card">
            <HBox>
                <StackPane styleClass="kpi-icon green">
                    <FontIcon iconLiteral="mdi2c-check-circle-outline" iconSize="16" styleClass="green-icon"/>
                </StackPane>
            </HBox>
            <Label fx:id="completedTasksKpiLabel" text="0" styleClass="kpi-value"/>
            <Label text="Completed Tasks" styleClass="kpi-label"/>
        </VBox>

        <VBox styleClass="kpi-card">
            <HBox>
                <StackPane styleClass="kpi-icon blue">
                    <FontIcon iconLiteral="mdi2f-folder-outline" iconSize="16" styleClass="blue-icon" />
                </StackPane>
            </HBox>
            <Label fx:id="totalProjectsKpiLabel" text="0" styleClass="kpi-value"/>
            <Label text="Total Projects" styleClass="kpi-label"/>
        </VBox>

        <VBox styleClass="kpi-card-urgent">
            <HBox>
                <StackPane styleClass="kpi-icon orange">
                    <FontIcon iconLiteral="mdi2a-alert-outline" iconSize="16" styleClass="red-icon"/>
                </StackPane>
            </HBox>
            <Label fx:id="upcomingDeadlinesKpiLabel" text="0" styleClass="kpi-value"/>
            <Label text="Upcoming Deadlines" styleClass="kpi-label"/>
        </VBox>

        <VBox styleClass="kpi-card-urgent">
            <HBox>
                <StackPane styleClass="kpi-icon orange">
                    <FontIcon iconLiteral="mdi2c-clock-outline" iconSize="16" styleClass="red-icon"/>
                </StackPane>
            </HBox>
            <Label fx:id="overdueUndoneKpiLabel" text="0" styleClass="kpi-value"/>
            <Label text="Overdue Undone Tasks" styleClass="kpi-label"/>
        </VBox>

    </HBox>

    <!-- Content row -->
    <HBox spacing="20">

        <!-- Recent Projects -->
        <VBox spacing="14" HBox.hgrow="ALWAYS" styleClass="table-container,projects-panel">
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="projects-panel-header">
                <VBox spacing="2">
                    <Label text="Recent Projects" styleClass="projects-panel-title" />
                    <Label text="Track active projects and progress" styleClass="projects-panel-subtitle" />
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
            </HBox>

            <ScrollPane fitToWidth="true" prefHeight="300.0" style="-fx-background-color: transparent; -fx-background: transparent;">
                <content>
                    <VBox fx:id="recentProjectsContainer" spacing="10.0" styleClass="recent-projects-list" />
                </content>
            </ScrollPane>

        </VBox>

        <!-- Tasks -->
        <VBox spacing="15" prefWidth="420" minWidth="420" maxWidth="420" styleClass="task-card">
            <HBox alignment="CENTER_LEFT">
                <Label text="Your Tasks" styleClass="card-title" />
                <Region HBox.hgrow="ALWAYS" />
                <Button onAction="#openPersonalTaskModal" styleClass="small-fab">
                    <graphic><FontIcon iconLiteral="mdi2p-plus" iconSize="14" iconColor="#7C3AED"/></graphic>
                </Button>
            </HBox>

            <ScrollPane fitToWidth="true" prefHeight="420.0" style="-fx-background-color: transparent; -fx-background: transparent;">
                <content>
                    <VBox fx:id="tasksListContainer" spacing="8" />
                </content>
            </ScrollPane>


        </VBox>

    </HBox>
</VBox>
